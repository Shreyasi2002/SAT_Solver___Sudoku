# Sudoku Pair â€“ Solving and Generation

A k-sudoku puzzle pair solver and generator implemented by encoding the problem to propositional logic and solving it via SAT solver (PySAT).

Given a sudoku puzzle pair S1, S2 (both of dimension k) as input, the sudoku pair solver should fill the empty cells of both sudokus such that it satisfies the following constraints â€“

- Individual sudoku properties should hold.
- For each empty cell ğ‘ºğŸ[ğ’Š, ğ’‹] â‰  ğ‘ºğŸ[ğ’Š, ğ’‹], where i is row and j is column.

The k-sudoku puzzle pair generator must return a sudoku pair which is maximal (have the largest number of holes possible) and has a unique solution.


## Sudoku Pair Solver â€“ Implementation

We can reduce the problem of solving Sudokus to the propositional satisfiability problem and the workflow looks like this â€“

<img src="https://github.com/Shreyasi2002/SAT_Solver___Sudoku/blob/main/Sudoku%20Solver%20and%20Generator/Sudoku%20Solver%20Workflow.png"/>

### Encoding Sudoku Pair in CNF

We are given a Sudoku puzzle pair and thus must build a propositional formula âˆ… such that â€“
- the Sudoku pair has a solution if and only if the formula is satisfiable
- from a satisfying assignment for âˆ…, we can easily decode a solution for the sudoku grid.

To obtain such a formula, we introduce a variable x<sub>r,c,v</sub> for each row r = 1, ..., 2n, and column c = 1, ..., n and value = 1, ..., n. The intuition is that if x<sub>r,c,v</sub> is true, then the grid element at row r and column c has the value v.

To enforce that the values of the variables x<sub>r,c,v</sub> model solutions to the Sudoku puzzle, the formula **âˆ… = ğ¶<sub>1</sub>âˆ§ğ¶<sub>2</sub>âˆ§ğ¶<sub>3</sub>âˆ§ğ¶<sub>4</sub>âˆ§ğ¶<sub>5</sub>âˆ§ğ¶<sub>6</sub>âˆ§ğ¶<sub>7</sub>** is built by introducing sets of clauses that model different aspects of Sudoku solutions (consider n = k<sup>2</sup>):




To get the Dimacs CNF variable number for the variable x<sub>r,c,v</sub> (encoding the fact that the cell at (r, c) has the value v, the following formula is used
â€“
```
(r - 1) * n * n + (c - 1) * n + (v - 1) + 1
```

The above clauses are passed to the **PySAT - Glucose 4.1 SAT solver** which generates a model if the formula is satisfiable, else returns None.

The generated model is then passed to a decoder to get the output in the form of a sudoku grid.

Example :<br/>

Sudoku Pair Input and Output Grids for k = 3
```
1st Sudoku                                                     1st Sudoku
â•”â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•—                          â•”â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•—
â•‘   â”‚   â”‚   â•‘ 6 â”‚   â”‚   â•‘   â”‚   â”‚ 2 â•‘                          â•‘ 9 â”‚ 8 â”‚ 7 â•‘ 6 â”‚ 4 â”‚ 5 â•‘ 3 â”‚ 1 â”‚ 2 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚ 5 â”‚ 2 â•‘   â”‚   â”‚   â•‘ 7 â”‚ 9 â”‚   â•‘                          â•‘ 4 â”‚ 5 â”‚ 2 â•‘ 8 â”‚ 1 â”‚ 3 â•‘ 7 â”‚ 9 â”‚ 6 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘ 6 â”‚   â”‚   â•‘   â”‚   â”‚ 7 â•‘   â”‚   â”‚ 8 â•‘                          â•‘ 6 â”‚ 3 â”‚ 1 â•‘ 9 â”‚ 2 â”‚ 7 â•‘ 5 â”‚ 4 â”‚ 8 â•‘
â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£                          â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£
â•‘   â”‚ 7 â”‚   â•‘ 3 â”‚   â”‚ 1 â•‘   â”‚ 5 â”‚   â•‘                          â•‘ 2 â”‚ 7 â”‚ 8 â•‘ 3 â”‚ 6 â”‚ 1 â•‘ 4 â”‚ 5 â”‚ 9 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘ 1 â”‚   â”‚   â•‘   â”‚ 5 â”‚   â•‘ 8 â”‚   â”‚   â•‘                          â•‘ 1 â”‚ 4 â”‚ 6 â•‘ 2 â”‚ 5 â”‚ 9 â•‘ 8 â”‚ 3 â”‚ 7 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚   â”‚ 5 â•‘   â”‚   â”‚   â•‘   â”‚ 2 â”‚   â•‘                          â•‘ 3 â”‚ 9 â”‚ 5 â•‘ 4 â”‚ 7 â”‚ 8 â•‘ 6 â”‚ 2 â”‚ 1 â•‘
â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£                          â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£
â•‘ 7 â”‚   â”‚   â•‘   â”‚ 9 â”‚   â•‘   â”‚   â”‚ 4 â•‘                          â•‘ 7 â”‚ 2 â”‚ 3 â•‘ 5 â”‚ 9 â”‚ 6 â•‘ 1 â”‚ 8 â”‚ 4 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚ 1 â”‚   â•‘ 7 â”‚   â”‚   â•‘   â”‚   â”‚   â•‘                          â•‘ 8 â”‚ 1 â”‚ 4 â•‘ 7 â”‚ 3 â”‚ 2 â•‘ 9 â”‚ 6 â”‚ 5 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚   â”‚ 9 â•‘   â”‚ 8 â”‚   â•‘   â”‚   â”‚ 3 â•‘                          â•‘ 5 â”‚ 6 â”‚ 9 â•‘ 1 â”‚ 8 â”‚ 4 â•‘ 2 â”‚ 7 â”‚ 3 â•‘
â•šâ•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•                          â•šâ•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•

2nd Sudoku                                                     2nd Sudoku
â•”â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•—                          â•”â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•¦â•â•â•â•¤â•â•â•â•¤â•â•â•â•—
â•‘   â”‚   â”‚   â•‘ 4 â”‚   â”‚   â•‘   â”‚   â”‚ 5 â•‘                          â•‘ 6 â”‚ 2 â”‚ 9 â•‘ 4 â”‚ 7 â”‚ 3 â•‘ 1 â”‚ 8 â”‚ 5 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚ 3 â”‚ 5 â•‘   â”‚   â”‚   â•‘ 9 â”‚ 6 â”‚   â•‘                          â•‘ 7 â”‚ 3 â”‚ 5 â•‘ 2 â”‚ 8 â”‚ 1 â•‘ 9 â”‚ 6 â”‚ 4 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘ 4 â”‚   â”‚   â•‘   â”‚   â”‚ 9 â•‘   â”‚   â”‚ 2 â•‘                          â•‘ 4 â”‚ 1 â”‚ 8 â•‘ 6 â”‚ 5 â”‚ 9 â•‘ 3 â”‚ 7 â”‚ 2 â•‘
â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£                          â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£
â•‘   â”‚ 9 â”‚   â•‘ 1 â”‚   â”‚ 8 â•‘   â”‚ 3 â”‚   â•‘                          â•‘ 5 â”‚ 9 â”‚ 2 â•‘ 1 â”‚ 4 â”‚ 8 â•‘ 7 â”‚ 3 â”‚ 6 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘ 8 â”‚   â”‚   â•‘   â”‚ 3 â”‚   â•‘ 2 â”‚   â”‚   â•‘                          â•‘ 8 â”‚ 7 â”‚ 4 â•‘ 5 â”‚ 3 â”‚ 6 â•‘ 2 â”‚ 1 â”‚ 9 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚   â”‚ 3 â•‘   â”‚   â”‚   â•‘   â”‚ 5 â”‚   â•‘                          â•‘ 1 â”‚ 6 â”‚ 3 â•‘ 7 â”‚ 9 â”‚ 2 â•‘ 4 â”‚ 5 â”‚ 8 â•‘
â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£                          â• â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•¬â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•£
â•‘ 9 â”‚   â”‚   â•‘   â”‚ 6 â”‚   â•‘   â”‚   â”‚ 7 â•‘                          â•‘ 9 â”‚ 5 â”‚ 1 â•‘ 3 â”‚ 6 â”‚ 4 â•‘ 8 â”‚ 2 â”‚ 7 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚ 8 â”‚   â•‘ 9 â”‚   â”‚   â•‘   â”‚   â”‚   â•‘                          â•‘ 2 â”‚ 8 â”‚ 7 â•‘ 9 â”‚ 1 â”‚ 5 â•‘ 6 â”‚ 4 â”‚ 3 â•‘
â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢                          â•Ÿâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•«â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•¢
â•‘   â”‚   â”‚ 6 â•‘   â”‚ 2 â”‚   â•‘   â”‚   â”‚ 1 â•‘                          â•‘ 3 â”‚ 4 â”‚ 6 â•‘ 8 â”‚ 2 â”‚ 7 â•‘ 5 â”‚ 9 â”‚ 1 â•‘
â•šâ•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•                          â•šâ•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•©â•â•â•â•§â•â•â•â•§â•â•â•â•

      Input Sudoku Pair Grid                                          Output Sudoku Pair Grid

Time taken - 0.14565899999999998 secs
```
